# アプリケーション機能一覧（最終版）

## 1. ユーザー認証機能
### 機能概要
ユーザーがアプリケーションを個人利用するために、アカウントの作成、ログイン、ログアウトを行う。

### 詳細
- **アカウント新規登録**: メールアドレスとパスワードで新しいアカウントを作成できる。パスワードはハッシュ化して安全に保存する。
- **ログイン**: 登録したメールアドレスとパスワードでログインできる。ログイン状態はセッションで維持される。
- **ログアウト**: ログイン状態を解除できる。

---

## 2. レシピ検索・閲覧機能
### 機能概要
調理したいレシピを探し、その詳細情報を確認する。

### 詳細
- **レシピ一覧表示**: 楽天レシピAPIから取得したレシピをカテゴリ別などで一覧表示する。
- **レシピ詳細表示**: 一覧から特定のレシピを選択すると、材料、元の手順、調理時間などの詳細情報をモーダルウィンドウや別ページで表示する。

---

## 3. レシピ選択機能（調理カート）
### 機能概要
同時に調理したいレシピを最大3つまで選択し、一時的に保持する。

### 詳細
- **レシピの追加**: レシピ一覧や詳細画面から「選択」ボタンを押すと、調理カートにレシピが追加される。
- **レシピの削除**: 調理カート内のレシピを削除できる。
- **選択数制限**: 調理カートに追加できるレシピは最大3つまでとする。4つ目以降を追加しようとするとアラートを表示する。
- **カート表示**: 画面上に常時、またはアイコンクリックで現在選択中のレシピが確認できるUI（カート）を表示する。

---

## 4. 調理前確認機能
### 機能概要
調理を開始する前に、選択した全レシピの統合情報を確認し、調理開始を決定する。

### 詳細
- **統合情報表示**: 選択した最大3つのレシピについて、以下の情報を表示する。
  - 選択したレシピ名と画像のリスト
  - **必要な全材料リスト**（重複する材料はまとめる）
  - 各レシピの元のステップ数と想定時間の合計
- **調理開始のトリガー**: この画面にある「確定して調理を開始する」ボタンを押すことで、次の「同時調理ナビゲーション機能」が開始される。

---

## 5. 同時調理ナビゲーション機能
### 機能概要
OpenAI APIによって最適化された調理手順をステップバイステップで表示し、ユーザーの調理進行をサポートする。

### 詳細
- **最適化手順の生成・表示**: 「調理開始」時に、選択された3つのレシピの手順をOpenAI APIに送信し、最も効率的な同時調理手順を生成して表示する。
- **ステップ進行管理**:
  - 現在のステップがハイライト表示される。
  - 「次のステップへ」ボタンを押すと、現在のステップが「完了」扱いになり、次のステップに進む。
  - 完了したステップと未完了のステップは視覚的に区別できるように表示する（例：チェックマーク）。
- **(拡張機能) 未完了手順の再最適化**: 調理中に「再最適化」ボタンを押すと、その時点での未完了の手順だけを対象に、再度OpenAI APIへ最適化をリクエストし、新しい手順を提示する。

---

## 6. 調理履歴機能
### 機能概要
過去に調理したレシピの組み合わせと、その際の最適化手順を記録・閲覧する。

### 詳細
- **履歴の自動保存**: 調理を開始した時点で、調理したユーザー、レシピの組み合わせ、生成された最適化手順がデータベースに自動で保存される。
- **履歴一覧表示**: ユーザーはマイページで過去の調理履歴を一覧で確認できる。
- **履歴詳細表示**: 履歴を選択すると、過去にどのレシピを調理し、どのような最適化手順が生成されたかを再度確認できる。
